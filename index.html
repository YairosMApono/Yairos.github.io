<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#143824">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Empire Builder - Einzelspieler Strategie</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
    <main class="game-container">
        <header class="game-header">
            <h1>âš”ï¸ Empire Builder</h1>
            <p>Baue dein Reich â€“ Einzelspieler Strategie</p>
            <div class="header-actions">
                <div class="speed-controls">
                    <button class="btn btn-sm speed-btn" id="speedPause" type="button" title="Pause">â¸</button>
                    <button class="btn btn-sm speed-btn active" id="speed1x" type="button" title="1x">1x</button>
                    <button class="btn btn-sm speed-btn" id="speed2x" type="button" title="2x">2x</button>
                </div>
                <a class="btn btn-sm link-btn" id="gameLink" href="#" target="_blank" rel="noopener" title="Link zum Spiel">ğŸ”— Link</a>
                <button class="btn btn-sm new-game-btn" id="resetGameButton" type="button">ğŸ”„ Neues Spiel</button>
            </div>
        </header>

        <section class="resource-bar" aria-label="RohstoffÃ¼bersicht">
            <button class="help-btn" data-help="resources" aria-label="Hilfe zu Rohstoffen" type="button">?</button>
            <div class="resource resource-gold">
                <span class="resource-icon">ğŸª™</span>
                <div><span class="resource-value" id="resGold">0</span></div>
            </div>
            <div class="resource">
                <span class="resource-icon">ğŸªµ</span>
                <div><span class="resource-value" id="resWood">0</span><div class="resource-rate" id="rateWood">+0/h</div><div class="resource-storage" id="storeWood"></div></div>
            </div>
            <div class="resource">
                <span class="resource-icon">ğŸ§±</span>
                <div><span class="resource-value" id="resClay">0</span><div class="resource-rate" id="rateClay">+0/h</div><div class="resource-storage" id="storeClay"></div></div>
            </div>
            <div class="resource">
                <span class="resource-icon">âš™ï¸</span>
                <div><span class="resource-value" id="resIron">0</span><div class="resource-rate" id="rateIron">+0/h</div><div class="resource-storage" id="storeIron"></div></div>
            </div>
            <div class="resource">
                <span class="resource-icon">ğŸŒ¾</span>
                <div><span class="resource-value" id="resCrop">0</span><div class="resource-rate" id="rateCrop">+0/h</div><div class="resource-storage" id="storeCrop"></div></div>
            </div>
            <div class="resource resource-time">
                <span class="resource-icon">â±ï¸</span>
                <div><span class="resource-value" id="gameTime">Tag 1</span></div>
            </div>
        </section>

        <nav class="tabs" aria-label="Spielbereiche">
            <button class="tab active" data-tab="map" type="button">ğŸ—ºï¸ Karte<span class="tab-badge" id="mapBadge" hidden>!</span></button>
            <button class="tab" data-tab="village" type="button">ğŸ° Dorf</button>
            <button class="tab" data-tab="troops" type="button">âš”ï¸ Truppen</button>
            <button class="tab" data-tab="dungeons" type="button">ğŸ•³ï¸ Dungeons</button>
            <button class="tab" data-tab="reports" type="button">ğŸ“œ Berichte</button>
        </nav>

        <section class="status-panels">
            <article class="status-card">
                <h3>Ã–konomie</h3>
                <p id="economySummary">Netto-Getreide: +0/h</p>
            </article>
            <article class="status-card">
                <h3>Aktives Ziel <span id="objectiveProgress">0/12</span></h3>
                <p id="activeObjectiveSummary">Lade Zielstatus...</p>
            </article>
        </section>

        <section id="queueContainer" class="queue" hidden>
            <div class="section-header compact">
                <h3 class="section-title">Auftragswarteschlange</h3>
                <span class="queue-slots" id="queueSlotsInfo">1 Slot aktiv</span>
            </div>
            <div id="queueList"></div>
        </section>

        <section id="mapTab" class="village-view active">
            <div class="map-container">
                <div class="section-header">
                    <h3 class="section-title">Weltkarte</h3>
                    <button class="help-btn" data-help="map" aria-label="Hilfe zur Karte" type="button">?</button>
                </div>
                <div class="map-grid" id="mapGrid"></div>
                <div class="info-panel">
                    <h3>â„¹ï¸ Hinweis</h3>
                    <p>Klicke auf dein Dorf (ğŸ°) zum Bauen. Erweiterte Felder (ğŸ˜ï¸) zeigen dein Reich. Leere Felder (ğŸ”²) kÃ¶nnen expandiert werden.</p>
                </div>
                <div id="attackAlert" class="attack-alert" hidden>
                    <h3>âš ï¸ Angriff!</h3>
                    <p id="attackAlertText"></p>
                    <button class="btn btn-sm" id="attackResolveBtn" type="button">Kampf ausfÃ¼hren</button>
                </div>
            </div>
        </section>

        <section id="villageTab" class="village-view">
            <div class="map-container">
                <div class="section-header">
                    <h3 class="section-title">Dorfzentrum</h3>
                    <button class="help-btn" data-help="village" aria-label="Hilfe zum Dorfzentrum" type="button">?</button>
                </div>
                <p class="section-subtitle">Tippe auf GebÃ¤ude oder Rohstofffelder, um sie auszubauen.</p>
                <div class="village-layout" id="villageLayout"></div>
                <div class="section-header">
                    <h3 class="section-title">Rohstofffelder</h3>
                    <button class="help-btn" data-help="fields" aria-label="Hilfe zu Rohstofffeldern" type="button">?</button>
                </div>
                <div class="resource-fields" id="resourceFields"></div>
            </div>

            <section class="objectives">
                <div class="section-header">
                    <h3 class="section-title">Ziele</h3>
                    <button class="help-btn" data-help="objectives" aria-label="Hilfe zu Zielen" type="button">?</button>
                </div>
                <div id="objectiveList" class="objective-list"></div>
            </section>
            <section class="equipment-section card-pattern" id="equipmentSection">
                <div class="section-header">
                    <h3 class="section-title">Schmiede â€“ AusrÃ¼stung</h3>
                </div>
                <p class="section-subtitle" id="equipmentSubtitle">Schmiede Stufe 1 erforderlich.</p>
                <div id="equipmentList" class="equipment-list"></div>
            </section>
            <section class="achievements-section card-pattern" id="achievementsSection">
                <div class="section-header">
                    <h3 class="section-title">Achievements</h3>
                </div>
                <div id="achievementList" class="achievement-list"></div>
            </section>
        </section>

        <section id="troopsTab" class="village-view">
            <div class="map-container">
                <div class="section-header">
                    <h3 class="section-title">Kaserne</h3>
                    <button class="help-btn" data-help="troops" aria-label="Hilfe zur Kaserne" type="button">?</button>
                </div>
                <p class="section-subtitle">Rekrutiere Truppen â€“ sie verbrauchen Getreide pro Stunde. Truppen sammeln XP in KÃ¤mpfen.</p>
                <div class="troops-grid" id="troopsGrid"></div>
            </div>
        </section>

        <section id="dungeonsTab" class="village-view">
            <div class="map-container">
                <div class="section-header">
                    <h3 class="section-title">Dungeons</h3>
                    <button class="help-btn" data-help="dungeons" aria-label="Hilfe zu Dungeons" type="button">?</button>
                </div>
                <p class="section-subtitle">Erobere Dungeons mit deinen Truppen. Belohnungen: Gold, Ressourcen, XP.</p>
                <p class="dungeon-cooldown" id="dungeonCooldown"></p>
                <div id="dungeonList" class="dungeon-list"></div>
            </div>
        </section>

        <section id="reportsTab" class="village-view">
            <div class="map-container">
                <div class="section-header">
                    <h3 class="section-title">Berichte</h3>
                    <button class="help-btn" data-help="reports" aria-label="Hilfe zu Berichten" type="button">?</button>
                </div>
                <div class="report-filters">
                    <button class="filter-btn active" data-filter="all" type="button">Alle</button>
                    <button class="filter-btn" data-filter="build" type="button">Bau</button>
                    <button class="filter-btn" data-filter="combat" type="button">Kampf</button>
                    <button class="filter-btn" data-filter="objective" type="button">Ziele</button>
                    <button class="filter-btn" data-filter="event" type="button">Events</button>
                </div>
                <div class="report-list" id="reportList"></div>
            </div>
        </section>
    </main>

    <div id="tutorialOverlay" class="tutorial-overlay" hidden>
        <div class="tutorial-content">
            <p id="tutorialText">Klicke auf dein Dorf ğŸ° um zu starten.</p>
            <button class="btn" id="tutorialClose" type="button">Verstanden</button>
        </div>
    </div>

    <div id="newGameModal" class="modal">
        <div class="modal-content">
            <h2>Neues Spiel?</h2>
            <p>Alle Fortschritte gehen verloren. Gib <strong>NEU</strong> ein zur BestÃ¤tigung.</p>
            <div class="difficulty-select">
                <label><input type="radio" name="difficulty" value="einfach"> Einfach</label>
                <label><input type="radio" name="difficulty" value="normal" checked> Normal</label>
                <label><input type="radio" name="difficulty" value="schwer"> Schwer</label>
            </div>
            <input type="text" id="newGameConfirm" placeholder="NEU" maxlength="3" aria-label="BestÃ¤tigung">
            <div class="modal-actions">
                <button class="btn btn-danger" id="newGameCancel" type="button">Abbrechen</button>
                <button class="btn" id="newGameConfirmBtn" type="button" disabled>BestÃ¤tigen</button>
            </div>
        </div>
    </div>

    <div id="helpModal" class="modal help-modal">
        <div class="modal-content">
            <h2 id="helpTitle">Hilfe</h2>
            <p class="help-text" id="helpText"></p>
            <div class="modal-actions">
                <button class="btn" id="helpCloseButton" type="button">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <div id="buildingModal" class="modal">
        <div class="modal-content">
            <div class="modal-title-row">
                <h2 id="modalTitle">GebÃ¤ude</h2>
                <button class="help-btn" id="modalHelpBtn" type="button" hidden>?</button>
            </div>
            <p class="desc" id="modalDesc"></p>
            <div class="costs" id="modalCosts"></div>
            <div class="time" id="modalTime"></div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="modalCancel" type="button">Abbrechen</button>
                <button class="btn btn-primary" id="modalBuild" type="button">Ausbauen</button>
            </div>
        </div>
    </div>

    <script src="assets/game.js" defer></script>
</body>
</html>
