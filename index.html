<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#1a472a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="Empire Builder â€“ Einzelspieler Strategie. Baue dein Reich, entwickle Rohstofffelder, errichte GebÃ¤ude und rekrutiere Truppen.">
    <title>Empire Builder - Einzelspieler Strategie</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="game-container">
        <header class="game-header">
            <h1>âš”ï¸ Empire Builder</h1>
            <p>Baue dein Reich â€“ Einzelspieler Strategie</p>
            <button class="btn btn-sm" onclick="resetGame()">ğŸ”„ Neues Spiel</button>
        </header>

        <div class="resource-bar">
            <button class="help-btn" aria-label="Hilfe zu Ressourcen" onclick="showHelp('resources')">?</button>
            <div class="resource">
                <span class="resource-icon">ğŸªµ</span>
                <div>
                    <span class="resource-value" id="resWood">0</span>
                    <div class="resource-rate" id="rateWood">+0/h</div>
                    <div class="resource-storage" id="storeWood"></div>
                </div>
            </div>
            <div class="resource">
                <span class="resource-icon">ğŸ§±</span>
                <div>
                    <span class="resource-value" id="resClay">0</span>
                    <div class="resource-rate" id="rateClay">+0/h</div>
                    <div class="resource-storage" id="storeClay"></div>
                </div>
            </div>
            <div class="resource">
                <span class="resource-icon">âš™ï¸</span>
                <div>
                    <span class="resource-value" id="resIron">0</span>
                    <div class="resource-rate" id="rateIron">+0/h</div>
                    <div class="resource-storage" id="storeIron"></div>
                </div>
            </div>
            <div class="resource">
                <span class="resource-icon">ğŸŒ¾</span>
                <div>
                    <span class="resource-value" id="resCrop">0</span>
                    <div class="resource-rate" id="rateCrop">+0/h</div>
                    <div class="resource-storage" id="storeCrop"></div>
                </div>
            </div>
            <div class="resource resource-time">
                <span class="resource-icon">â±ï¸</span>
                <div><span class="resource-value" id="gameTime">Tag 1</span></div>
            </div>
        </div>

        <nav class="tabs" role="tablist">
            <button class="tab active" data-tab="map" role="tab" aria-selected="true">ğŸ—ºï¸ Karte</button>
            <button class="tab" data-tab="village" role="tab" aria-selected="false">ğŸ° Dorf</button>
            <button class="tab" data-tab="troops" role="tab" aria-selected="false">âš”ï¸ Truppen</button>
            <button class="tab" data-tab="reports" role="tab" aria-selected="false">ğŸ“œ Berichte</button>
        </nav>

        <div id="queueContainer" class="queue" style="display:none">
            <div id="queueList"></div>
        </div>

        <section id="mapTab" class="village-view active" role="tabpanel">
            <div class="map-container">
                <div class="section-header">
                    <h2 class="section-title">Weltkarte</h2>
                    <button class="help-btn" aria-label="Hilfe zur Karte" onclick="showHelp('map')">?</button>
                </div>
                <div class="map-grid" id="mapGrid"></div>
                <div class="info-panel">
                    <h3>â„¹ï¸ Hinweis</h3>
                    <p>Klicke auf dein Dorf (ğŸ°) um es zu verwalten. Baue Rohstofffelder aus, errichte GebÃ¤ude und rekrutiere Truppen!</p>
                </div>
            </div>
        </section>

        <section id="villageTab" class="village-view" role="tabpanel">
            <div class="map-container">
                <div class="section-header">
                    <h2 class="section-title">Dorfzentrum</h2>
                    <button class="help-btn" aria-label="Hilfe zum Dorf" onclick="showHelp('village')">?</button>
                </div>
                <p class="section-subtitle">Klicke auf ein GebÃ¤ude oder Feld zum Ausbauen</p>
                <div class="village-layout" id="villageLayout"></div>
                <div class="section-header">
                    <h2 class="section-title">Rohstofffelder</h2>
                    <button class="help-btn" aria-label="Hilfe zu Feldern" onclick="showHelp('fields')">?</button>
                </div>
                <div class="resource-fields" id="resourceFields"></div>
            </div>
        </section>

        <section id="troopsTab" class="village-view" role="tabpanel">
            <div class="map-container">
                <div class="section-header">
                    <h2 class="section-title">Kaserne</h2>
                    <button class="help-btn" aria-label="Hilfe zu Truppen" onclick="showHelp('troops')">?</button>
                </div>
                <p class="section-subtitle">Rekrutiere Truppen â€“ verbrauchen Getreide pro Stunde</p>
                <div class="troops-grid" id="troopsGrid"></div>
            </div>
        </section>

        <section id="reportsTab" class="village-view" role="tabpanel">
            <div class="map-container">
                <div class="section-header">
                    <h2 class="section-title">Berichte</h2>
                    <button class="help-btn" aria-label="Hilfe zu Berichten" onclick="showHelp('reports')">?</button>
                </div>
                <div class="report-list" id="reportList"></div>
            </div>
        </section>
    </div>

    <div id="helpModal" class="modal help-modal" role="dialog" aria-labelledby="helpTitle" aria-modal="true">
        <div class="modal-content">
            <h2 id="helpTitle">Hilfe</h2>
            <p class="help-text" id="helpText"></p>
            <div class="modal-actions">
                <button class="btn" onclick="document.getElementById('helpModal').classList.remove('show')">SchlieÃŸen</button>
            </div>
        </div>
    </div>

    <div id="buildingModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">GebÃ¤ude</h2>
                <button class="help-btn" id="modalHelpBtn" aria-label="ErklÃ¤rung" onclick="showModalHelp()" style="display:none">?</button>
            </div>
            <p class="desc" id="modalDesc"></p>
            <div class="costs" id="modalCosts"></div>
            <div class="time" id="modalTime"></div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="modalCancel">Abbrechen</button>
                <button class="btn" id="modalBuild">Ausbauen</button>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script>
        (function init() {
            load();
            if (!localStorage.getItem('empire-start')) {
                localStorage.setItem('empire-start', Date.now());
            }
            initUI();
            renderMap();
            renderVillage();
            renderTroops();
            renderReports();
            setInterval(tick, TICK_INTERVAL_MS);
        })();
    </script>
</body>
</html>
